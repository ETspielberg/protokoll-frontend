(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jJpY:function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=function(){return function(){}}(),a=t("pMnS"),i=t("VSng"),s=t("qg5K"),o=t("Jot4"),r=t("Ip0R"),d=t("RXyF"),c=t("Czxz"),p=t("7LN8"),m=function(){return function(l,n,t,e,u,a,i){this.year=l,this.daysStock=n,this.daysLoaned=t,this.daysRequested=e,this.numberLoans=u,this.numberRequests=a,this.numberCald=i}}(),v=t("AwSQ"),f=function(){function l(l){this.dataService=l}return l.prototype.ngOnInit=function(){var l=this;this.dataService.dataChanged$.subscribe(function(n){return l.reset()}),this.reset()},l.prototype.reset=function(){this.statistics=new Map,this.statisticsList=[];var l=this.dataService.printData.get("stock");if(void 0!==l){var n=this.dataService.printData.get("requests"),t=new Date(l[0][0]),e=void 0;if(void 0!==n){var u=new Date(n[0][0]);e=Math.min(t.getFullYear(),u.getFullYear())}else e=Math.min(t.getFullYear());for(var a=(new Date).getFullYear();e<=a;)this.statistics.set(e,new m(e,0,0,0,0,0,0)),e++;this.calculateStatistics()}},l.prototype.calculateStatistics=function(){var l=this,n=(new Date).getFullYear();this.fillAnalysisFields(this.dataService.printData,"loans",n),this.fillAnalysisFields(this.dataService.printData,"cald",n),this.fillAnalysisFields(this.dataService.printData,"stock",n),this.fillAnalysisFields(this.dataService.printData,"requests",n),this.statistics.forEach(function(n){return l.statisticsList.push(n)})},l.prototype.fillAnalysisFields=function(l,n,t){var e=l.get(n);if(void 0!==e&&0!==e.length)for(var u,a=e[0],i=0;i<e.length;i++){var s=void 0,o=new Date(a[0]),r=o.getFullYear(),d=void 0;for(t=(d=i===e.length-1?new Date:new Date(e[i][0])).getFullYear();r<t;){var c=(new Date).setFullYear(r,12,31);s=this.statistics.get(r),u=(c.valueOf()-o.valueOf())*a[1]/864e5,"stock"===n?s.daysStock+=u:"requests"===n?s.daysRequested+=u:"loans"===n&&(s.daysLoaned+=u),o.setFullYear(++r,1,1)}s=this.statistics.get(r),void 0!==e[i][1]&&e[i][1]-a[1]>0&&("requests"===n?s.numberRequests++:"loans"===n?s.numberLoans++:"cald"===n&&s.numberCald++),u=(d.valueOf()-o.valueOf())*a[1]/864e5,"stock"===n?s.daysStock+=u:"loans"===n?s.daysLoaned+=u:"requests"===n&&(s.daysRequested+=u),a=e[i]}},l}(),h=e["\u0275crt"]({encapsulation:2,styles:[],data:{}});function g(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,2,"div",[["class","ui-helper-clearfix"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,1,"button",[["icon","pi pi-table"],["iconPos","left"],["label","Export"],["pButton",""],["style","float:left"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e["\u0275nov"](l.parent,7).exportCSV()&&u),u},null,null)),e["\u0275did"](2,4341760,null,0,i.ButtonDirective,[e.ElementRef],{iconPos:[0,"iconPos"],label:[1,"label"],icon:[2,"icon"]},null)],function(l,n){l(n,2,0,"left","Export","pi pi-table")},null)}function b(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,15,"tr",[],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),e["\u0275ted"](2,null,["",""])),e["\u0275ppd"](3,1),(l()(),e["\u0275eld"](4,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),e["\u0275ted"](5,null,["",""])),e["\u0275ppd"](6,1),(l()(),e["\u0275eld"](7,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),e["\u0275ted"](8,null,["",""])),e["\u0275ppd"](9,1),(l()(),e["\u0275eld"](10,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),e["\u0275ted"](11,null,["",""])),e["\u0275ppd"](12,1),(l()(),e["\u0275eld"](13,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),e["\u0275ted"](14,null,["",""])),e["\u0275ppd"](15,1)],null,function(l,n){var t=e["\u0275unv"](n,2,0,l(n,3,0,e["\u0275nov"](n.parent,0),"year"));l(n,2,0,t);var u=e["\u0275unv"](n,5,0,l(n,6,0,e["\u0275nov"](n.parent,0),"statistics.averageLoan"));l(n,5,0,u);var a=e["\u0275unv"](n,8,0,l(n,9,0,e["\u0275nov"](n.parent,0),"statistics.numberRequests"));l(n,8,0,a);var i=e["\u0275unv"](n,11,0,l(n,12,0,e["\u0275nov"](n.parent,0),"statistics.numberLoans"));l(n,11,0,i);var s=e["\u0275unv"](n,14,0,l(n,15,0,e["\u0275nov"](n.parent,0),"statistics.numberCald"));l(n,14,0,s)})}function y(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,11,"tr",[],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e["\u0275ted"](2,null,["",""])),(l()(),e["\u0275eld"](3,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e["\u0275ted"](4,null,["",""])),e["\u0275ppd"](5,2),(l()(),e["\u0275eld"](6,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e["\u0275ted"](7,null,["",""])),(l()(),e["\u0275eld"](8,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e["\u0275ted"](9,null,["",""])),(l()(),e["\u0275eld"](10,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e["\u0275ted"](11,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit.year);var t=e["\u0275unv"](n,4,0,l(n,5,0,e["\u0275nov"](n.parent,1),n.context.$implicit.daysLoaned/n.context.$implicit.daysStock,"1.0-1"));l(n,4,0,t),l(n,7,0,n.context.$implicit.numberRequests),l(n,9,0,n.context.$implicit.numberLoans),l(n,11,0,n.context.$implicit.numberCald)})}function _(l){return e["\u0275vid"](0,[e["\u0275pid"](0,s.a,[o.a]),e["\u0275pid"](0,r.PercentPipe,[e.LOCALE_ID]),(l()(),e["\u0275eld"](2,0,null,null,2,"h2",[],null,null,null,null,null)),(l()(),e["\u0275ted"](3,null,["",""])),e["\u0275ppd"](4,1),(l()(),e["\u0275eld"](5,0,null,null,10,"p-table",[["sortField","year"]],null,null,null,d.d,d.b)),e["\u0275prd"](512,null,c.TableService,c.TableService,[]),e["\u0275did"](7,5488640,[["dstat",4]],1,c.Table,[e.ElementRef,e.NgZone,c.TableService],{paginator:[0,"paginator"],rows:[1,"rows"],rowsPerPageOptions:[2,"rowsPerPageOptions"],value:[3,"value"],sortField:[4,"sortField"],sortOrder:[5,"sortOrder"]},null),e["\u0275qud"](603979776,1,{templates:1}),e["\u0275pad"](9,3),(l()(),e["\u0275and"](0,null,null,1,null,g)),e["\u0275did"](11,16384,[[1,4]],0,p.PrimeTemplate,[e.TemplateRef],{name:[0,"name"]},null),(l()(),e["\u0275and"](0,null,null,1,null,b)),e["\u0275did"](13,16384,[[1,4]],0,p.PrimeTemplate,[e.TemplateRef],{name:[0,"name"]},null),(l()(),e["\u0275and"](0,null,null,1,null,y)),e["\u0275did"](15,16384,[[1,4]],0,p.PrimeTemplate,[e.TemplateRef],{name:[0,"name"]},null)],function(l,n){var t=n.component,e=l(n,9,0,10,20,50);l(n,7,0,!0,10,e,t.statisticsList,"year",-1),l(n,11,0,"caption"),l(n,13,0,"header"),l(n,15,0,"body")},function(l,n){var t=e["\u0275unv"](n,3,0,l(n,4,0,e["\u0275nov"](n,0),"title.statistics"));l(n,3,0,t)})}function F(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-statistics",[],null,null,null,_,h)),e["\u0275did"](1,114688,null,0,f,[v.a],null,null)],function(l,n){l(n,1,0)},null)}var S=e["\u0275ccf"]("app-statistics",f,F,{},{},[]),w=t("gIcY"),M=t("RMUf"),R=t("nciF"),L=t("mU/a"),D=t("0Esv"),k=t("ZYCi");t.d(n,"StatisticsModuleNgFactory",function(){return C});var C=e["\u0275cmf"](u,[],function(l){return e["\u0275mod"]([e["\u0275mpd"](512,e.ComponentFactoryResolver,e["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,S]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["\u0275mpd"](4608,r.NgLocalization,r.NgLocaleLocalization,[e.LOCALE_ID,[2,r["\u0275angular_packages_common_common_a"]]]),e["\u0275mpd"](4608,w["\u0275angular_packages_forms_forms_j"],w["\u0275angular_packages_forms_forms_j"],[]),e["\u0275mpd"](4608,o.a,o.a,[M.a]),e["\u0275mpd"](1073742336,r.CommonModule,r.CommonModule,[]),e["\u0275mpd"](1073742336,p.SharedModule,p.SharedModule,[]),e["\u0275mpd"](1073742336,R.DropdownModule,R.DropdownModule,[]),e["\u0275mpd"](1073742336,w["\u0275angular_packages_forms_forms_bc"],w["\u0275angular_packages_forms_forms_bc"],[]),e["\u0275mpd"](1073742336,w.FormsModule,w.FormsModule,[]),e["\u0275mpd"](1073742336,L.PaginatorModule,L.PaginatorModule,[]),e["\u0275mpd"](1073742336,c.TableModule,c.TableModule,[]),e["\u0275mpd"](1073742336,D.a,D.a,[]),e["\u0275mpd"](1073742336,i.ButtonModule,i.ButtonModule,[]),e["\u0275mpd"](1073742336,k.RouterModule,k.RouterModule,[[2,k["\u0275angular_packages_router_router_a"]],[2,k.Router]]),e["\u0275mpd"](1073742336,u,u,[]),e["\u0275mpd"](256,M.a,M.b,[]),e["\u0275mpd"](1024,k.ROUTES,function(){return[[{path:"",component:f}]]},[])])})}}]);